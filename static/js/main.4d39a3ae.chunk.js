(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{11:function(t,e,a){t.exports={post:"Post_post__2bW5D",text:"Post_text__1df4v",more:"Post_more__1Lzf8",btn:"Post_btn__3NjFp"}},12:function(t,e,a){t.exports={postComp:"ExactPost_postComp__1X420",post:"ExactPost_post__27fRe",text:"ExactPost_text__1UXJC",line:"ExactPost_line__35XMJ",exactBtn:"ExactPost_exactBtn__2bB2Q"}},15:function(t,e,a){t.exports={postComp:"AddPost_postComp__3xHIE",addPostForm:"AddPost_addPostForm__1R8JZ",btn:"AddPost_btn__3zCO9"}},16:function(t,e,a){t.exports={postComp:"EditPost_postComp__2Y9UD",editPostForm:"EditPost_editPostForm__16FtT",btnBack:"EditPost_btnBack__3Er4T",btn:"EditPost_btn__2EMjV"}},21:function(t,e,a){t.exports={newPost:"Posts_newPost__2YPks",posts:"Posts_posts__1kHD-"}},33:function(t,e,a){t.exports={timestamp:"Timestamp_timestamp__3gXgt"}},35:function(t,e,a){t.exports=a.p+"static/media/back.2f02a21a.svg"},36:function(t,e,a){t.exports={btnBack:"ButtonBack_btnBack__svNI0"}},38:function(t,e,a){t.exports=a(67)},43:function(t,e,a){},66:function(t,e,a){},67:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),c=a(32),r=a.n(c),l=(a(43),a(37)),s=a(8),i=a(1),m=a(10),u=a.n(m),p=function(t){var e=t.exactPostTitle,a=t.postToEditTitle,c=Object(n.useRef)(null);return o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",{ref:c},e&&e()||a&&a()||"Blog About Space"),o.a.createElement("a",{href:"https://github.com/DagamiTS",target:"_blank"},"My GitHub Page"))},d=a(7),E=a(33),f=a.n(E),b=function(t){var e=t.timestamp;return o.a.createElement("div",null,o.a.createElement("p",{className:f.a.timestamp},e))},_=a(11),h=a.n(_),v=function(t){var e=t.id,a=t.title,c=t.text,r=t.deletePost,l=t.timestamp,s=Object(n.useRef)(null),i=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(s.current.textContent.length>97){var t=s.current.textContent.substr(0,97)+"...";s.current.textContent=t}}),[s]),Object(n.useEffect)((function(){if(i.current.textContent.length>35){var t=i.current.textContent.substr(0,25)+"...";i.current.textContent=t}}),[i]),o.a.createElement("div",{className:h.a.post},o.a.createElement("h2",{ref:i},a),o.a.createElement(b,{timestamp:l}),o.a.createElement("p",{ref:s,className:h.a.text},c),o.a.createElement(d.b,{to:"/posts/".concat(e),className:h.a.more},"read more",o.a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrow-right",className:"svg-inline--fa fa-arrow-right fa-w-14",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},o.a.createElement("path",{fill:"currentColor",d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}))),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(d.b,{to:"/edit/".concat(e),className:h.a.btn},"Edit")),o.a.createElement("li",null,o.a.createElement("button",{onClick:function(){return r(e)},className:h.a.btn},"Delete"))))},x=a(21),P=a.n(x),g=function(t){var e,a=t.posts,n=t.deletePost;return a&&(e=a.map((function(t){return o.a.createElement(v,{key:t.id,id:t.id,timestamp:t.timestamp,title:t.data.title,text:t.data.text,deletePost:n})}))),console.log("RENDER POSTS"),o.a.createElement("main",{className:P.a.posts},o.a.createElement(d.b,{to:"/new",className:P.a.newPost},"Add new post"),e)},N=a(35),O=a.n(N),T=a(36),j=a.n(T),C=function(t){var e=t.className;return o.a.createElement(d.b,{to:"/",className:"".concat(j.a.btnBack," ").concat(e)},o.a.createElement("img",{src:O.a,alt:"arrow-left-icon"}),"Back to blog")},k=a(12),w=a.n(k),R=function(t){var e=t.post;return console.log("RENDER EXACT POST"),o.a.createElement("main",{className:w.a.postComp},o.a.createElement(C,{className:w.a.exactBtn}),o.a.createElement("div",{className:w.a.post},o.a.createElement("h2",null,e&&e.data.title),o.a.createElement(b,{timestamp:e&&e.timestamp}),o.a.createElement("span",{className:w.a.line}),o.a.createElement("p",{className:w.a.text},e&&e.data.text)))},S=a(15),D=a.n(S),A=function(t){var e=t.onAddPost,a=Object(n.useState)(""),c=Object(s.a)(a,2),r=c[0],l=c[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),p=m[0],d=m[1];console.log("RENDER ADD POST FORM");return o.a.createElement("div",{className:D.a.addPostForm},o.a.createElement("label",{htmlFor:"title"},"TITLE"),o.a.createElement("div",null,o.a.createElement("input",{value:r,id:"title",type:"text",onChange:function(t){return l(t.target.value)},placeholder:"Enter post title"})),o.a.createElement("label",{htmlFor:"text"},"TEXT"),o.a.createElement("div",null,o.a.createElement("textarea",{value:p,id:"text",onChange:function(t){return d(t.target.value)},placeholder:"Enter post text"})),o.a.createElement("button",{onClick:function(){if(r&&p){var t=(new Date).toLocaleDateString("ru-RU",{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});u.a.post("https://api-for-react-blog.herokuapp.com/api/posts",JSON.stringify({data:{title:r,text:p},timestamp:t})).then((function(t){return e(t.data)}))}},className:"btn"},"Add Post"))},B=function(t){var e=t.onAddPost;return console.log("RENDER ADD POST"),o.a.createElement("main",{className:D.a.postComp},o.a.createElement(C,{className:D.a.btnb}),o.a.createElement(A,{onAddPost:e}))},F=a(16),y=a.n(F),L=function(t){var e=t.id,a=t.initialTitle,c=t.initialText,r=t.onEditPost,l=Object(n.useState)(""),i=Object(s.a)(l,2),m=i[0],u=i[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),E=d[0],f=d[1];Object(n.useEffect)((function(){a&&c&&(u(a),f(c))}),[a,c]);return o.a.createElement("main",{className:y.a.editPostForm},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:""},"TITLE"),o.a.createElement("div",null,o.a.createElement("input",{name:"title",value:m,onChange:function(t){return u(t.target.value)}}))),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:""},"TEXT"),o.a.createElement("div",null,o.a.createElement("textarea",{name:"text",value:E,onChange:function(t){return f(t.target.value)}}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",onClick:function(){m&&E&&r(e,{title:m,text:E})},className:"btn"},"Edit Post"),o.a.createElement("button",{type:"reset",onClick:function(){u(a),f(c)},className:"btn ".concat(y.a.btn)},"Reset")))},J=function(t){var e=t.post,a=t.onEditPost;return console.log("EDIT POST RENDER"),o.a.createElement("main",{className:y.a.postComp},o.a.createElement(C,null),o.a.createElement(L,{id:e&&e.id,initialTitle:e&&e.data.title,initialText:e&&e.data.text,onEditPost:a}))};a(66);var X=function(){var t=Object(n.useState)(null),e=Object(s.a)(t,2),a=e[0],c=e[1],r=Object(n.useState)(null),m=Object(s.a)(r,2),d=m[0],E=m[1],f=Object(n.useState)(null),b=Object(s.a)(f,2),_=b[0],h=b[1],v=Object(i.e)(),x=Object(i.f)();return Object(n.useEffect)((function(){u.a.get("https://api-for-react-blog.herokuapp.com/api/posts").then((function(t){return c(t.data)}))}),[]),Object(n.useEffect)((function(){var t=Number(x.pathname.split("posts/")[1]);if(a){var e=a.find((function(e){return e.id===t}));E(e)}}),[x.pathname,a]),Object(n.useEffect)((function(){var t=Number(x.pathname.split("edit/")[1]);if(a){var e=a.find((function(e){return e.id===t}));h(e)}}),[x.pathname,a]),o.a.createElement("div",{className:"App"},o.a.createElement(p,{exactPostTitle:function(){return d&&d.data.title.length>20?d.data.title.substr(0,25)+"...":d?d.data.title:void 0},postToEditTitle:function(){return _&&_.data.title.length>20?_.data.title.substr(0,25)+"...":d?_.data.title:void 0}}),o.a.createElement(i.a,{exact:!0,path:"/"},o.a.createElement(g,{posts:a,deletePost:function(t){var e=a.filter((function(e){return e.id!==t}));c(e),u.a.delete("https://api-for-react-blog.herokuapp.com/api/posts/".concat(t)).catch((function(){return alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")}))}})),o.a.createElement(i.a,{path:"/posts/:id"},o.a.createElement(R,{post:d})),o.a.createElement(i.a,{path:"/new"},o.a.createElement(B,{onAddPost:function(t){var e=[t].concat(Object(l.a)(a));c(e),v.push("/")}})),o.a.createElement(i.a,{path:"/edit/:id"},o.a.createElement(J,{post:_,onEditPost:function(t,e){var n=a.map((function(a){return a.id===t&&(a.data=e),a}));c(n),v.push("/"),u.a.put("https://api-for-react-blog.herokuapp.com/api/posts/".concat(t),JSON.stringify(e)).catch((function(){return alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443")}))}})))};r.a.render(o.a.createElement(d.a,null,o.a.createElement(X,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.4d39a3ae.chunk.js.map